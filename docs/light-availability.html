<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 5 Light availability | Source code and supporting information for Drivers of diurnal variation in vocal activity in a tropical bird community</title>
  <meta name="description" content="Section 5 Light availability | Source code and supporting information for Drivers of diurnal variation in vocal activity in a tropical bird community" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 5 Light availability | Source code and supporting information for Drivers of diurnal variation in vocal activity in a tropical bird community" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="vjjan91/diurnal-Acoustics" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 5 Light availability | Source code and supporting information for Drivers of diurnal variation in vocal activity in a tropical bird community" />
  
  
  

<meta name="author" content="Vijay Ramesh" />
<meta name="author" content="Pavithra Sundar" />
<meta name="author" content="Meghana P Srivathsa" />
<meta name="author" content="Laurel Symes" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="frequency.html"/>
<link rel="next" href="foraging-guild.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#attribution"><i class="fa fa-check"></i><b>1.1</b> Attribution</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.2</b> Data access</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.3</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>2</b> Data cleaning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-cleaning.html"><a href="data-cleaning.html#install-required-libraries"><i class="fa fa-check"></i><b>2.1</b> Install required libraries</a></li>
<li class="chapter" data-level="2.2" data-path="data-cleaning.html"><a href="data-cleaning.html#loading-acoustic-data"><i class="fa fa-check"></i><b>2.2</b> Loading acoustic data</a></li>
<li class="chapter" data-level="2.3" data-path="data-cleaning.html"><a href="data-cleaning.html#add-standardized-ebird-species-codes-for-future-analysis"><i class="fa fa-check"></i><b>2.3</b> Add standardized eBird species codes for future analysis</a></li>
<li class="chapter" data-level="2.4" data-path="data-cleaning.html"><a href="data-cleaning.html#how-much-data-has-been-annotated-for-dawn-and-dusk-across-sites-and-days"><i class="fa fa-check"></i><b>2.4</b> How much data has been annotated for dawn and dusk across sites and days?</a></li>
<li class="chapter" data-level="2.5" data-path="data-cleaning.html"><a href="data-cleaning.html#more-data-cleaning"><i class="fa fa-check"></i><b>2.5</b> More data cleaning</a></li>
<li class="chapter" data-level="2.6" data-path="data-cleaning.html"><a href="data-cleaning.html#write-to-file"><i class="fa fa-check"></i><b>2.6</b> Write to file</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vocal-activity.html"><a href="vocal-activity.html"><i class="fa fa-check"></i><b>3</b> Vocal activity</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vocal-activity.html"><a href="vocal-activity.html#install-necessary-libraries"><i class="fa fa-check"></i><b>3.1</b> Install necessary libraries</a></li>
<li class="chapter" data-level="3.2" data-path="vocal-activity.html"><a href="vocal-activity.html#load-acoustic-data-and-species-scientific-names-data"><i class="fa fa-check"></i><b>3.2</b> Load acoustic data and species scientific names data</a></li>
<li class="chapter" data-level="3.3" data-path="vocal-activity.html"><a href="vocal-activity.html#filtering-acoustic-data-to-ensure-sampling-periods-are-even-across-dawn-and-dusk"><i class="fa fa-check"></i><b>3.3</b> Filtering acoustic data to ensure sampling periods are even across dawn and dusk</a></li>
<li class="chapter" data-level="3.4" data-path="vocal-activity.html"><a href="vocal-activity.html#vocal-activity-across-time-periods"><i class="fa fa-check"></i><b>3.4</b> Vocal activity across time periods</a></li>
<li class="chapter" data-level="3.5" data-path="vocal-activity.html"><a href="vocal-activity.html#is-overall-vocal-activity-much-higher-at-dawn-compared-to-dusk-across-species"><i class="fa fa-check"></i><b>3.5</b> Is overall vocal activity much higher at dawn compared to dusk, across species?</a></li>
<li class="chapter" data-level="3.6" data-path="vocal-activity.html"><a href="vocal-activity.html#testing-for-differences-in-acoustic-detections-between-dawn-and-dusk"><i class="fa fa-check"></i><b>3.6</b> Testing for differences in acoustic detections between dawn and dusk</a></li>
<li class="chapter" data-level="3.7" data-path="vocal-activity.html"><a href="vocal-activity.html#figure-for-publication"><i class="fa fa-check"></i><b>3.7</b> Figure for publication</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="frequency.html"><a href="frequency.html"><i class="fa fa-check"></i><b>4</b> Frequency</a>
<ul>
<li class="chapter" data-level="4.1" data-path="frequency.html"><a href="frequency.html#install-necessary-libraries-1"><i class="fa fa-check"></i><b>4.1</b> Install necessary libraries</a></li>
<li class="chapter" data-level="4.2" data-path="frequency.html"><a href="frequency.html#load-acoustic-data-and-species-scientific-names-data-1"><i class="fa fa-check"></i><b>4.2</b> Load acoustic data and species scientific names data</a></li>
<li class="chapter" data-level="4.3" data-path="frequency.html"><a href="frequency.html#filtering-acoustic-data-to-ensure-sampling-periods-are-even-across-dawn-and-dusk-1"><i class="fa fa-check"></i><b>4.3</b> Filtering acoustic data to ensure sampling periods are even across dawn and dusk</a></li>
<li class="chapter" data-level="4.4" data-path="frequency.html"><a href="frequency.html#vocal-activity-data"><i class="fa fa-check"></i><b>4.4</b> Vocal activity data</a></li>
<li class="chapter" data-level="4.5" data-path="frequency.html"><a href="frequency.html#frequency-data"><i class="fa fa-check"></i><b>4.5</b> Frequency data</a></li>
<li class="chapter" data-level="4.6" data-path="frequency.html"><a href="frequency.html#visualization-of-detections-vs.-median-peak-frequency"><i class="fa fa-check"></i><b>4.6</b> Visualization of % detections vs. median peak frequency</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="light-availability.html"><a href="light-availability.html"><i class="fa fa-check"></i><b>5</b> Light availability</a>
<ul>
<li class="chapter" data-level="5.1" data-path="light-availability.html"><a href="light-availability.html#install-necessary-libraries-2"><i class="fa fa-check"></i><b>5.1</b> Install necessary libraries</a></li>
<li class="chapter" data-level="5.2" data-path="light-availability.html"><a href="light-availability.html#load-acoustic-data-and-species-scientific-names-data-2"><i class="fa fa-check"></i><b>5.2</b> Load acoustic data and species scientific names data</a></li>
<li class="chapter" data-level="5.3" data-path="light-availability.html"><a href="light-availability.html#filtering-acoustic-data-to-ensure-sampling-periods-are-even-across-dawn-and-dusk-2"><i class="fa fa-check"></i><b>5.3</b> Filtering acoustic data to ensure sampling periods are even across dawn and dusk</a></li>
<li class="chapter" data-level="5.4" data-path="light-availability.html"><a href="light-availability.html#vocal-activity-1"><i class="fa fa-check"></i><b>5.4</b> Vocal Activity</a></li>
<li class="chapter" data-level="5.5" data-path="light-availability.html"><a href="light-availability.html#extract-light-availability-for-each-date"><i class="fa fa-check"></i><b>5.5</b> Extract light availability for each date</a></li>
<li class="chapter" data-level="5.6" data-path="light-availability.html"><a href="light-availability.html#model-acoustic-detections-as-a-function-of-light-availability"><i class="fa fa-check"></i><b>5.6</b> Model acoustic detections as a function of light availability</a></li>
<li class="chapter" data-level="5.7" data-path="light-availability.html"><a href="light-availability.html#visualization-of-timing-of-vocalization"><i class="fa fa-check"></i><b>5.7</b> Visualization of timing of vocalization</a></li>
<li class="chapter" data-level="5.8" data-path="light-availability.html"><a href="light-availability.html#detections-vs.-median-time-to-darkness"><i class="fa fa-check"></i><b>5.8</b> %detections vs. median time to darkness</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="foraging-guild.html"><a href="foraging-guild.html"><i class="fa fa-check"></i><b>6</b> Foraging guild</a>
<ul>
<li class="chapter" data-level="6.1" data-path="foraging-guild.html"><a href="foraging-guild.html#install-necessary-libraries-3"><i class="fa fa-check"></i><b>6.1</b> Install necessary libraries</a></li>
<li class="chapter" data-level="6.2" data-path="foraging-guild.html"><a href="foraging-guild.html#load-acoustic-data-and-species-scientific-names-data-3"><i class="fa fa-check"></i><b>6.2</b> Load acoustic data and species scientific names data</a></li>
<li class="chapter" data-level="6.3" data-path="foraging-guild.html"><a href="foraging-guild.html#filtering-acoustic-data-to-ensure-sampling-periods-are-even-across-dawn-and-dusk-3"><i class="fa fa-check"></i><b>6.3</b> Filtering acoustic data to ensure sampling periods are even across dawn and dusk</a></li>
<li class="chapter" data-level="6.4" data-path="foraging-guild.html"><a href="foraging-guild.html#vocal-activity-across-time-periods-1"><i class="fa fa-check"></i><b>6.4</b> Vocal activity across time periods</a></li>
<li class="chapter" data-level="6.5" data-path="foraging-guild.html"><a href="foraging-guild.html#join-the-vocal_activity-data-and-species-trait-data"><i class="fa fa-check"></i><b>6.5</b> Join the vocal_activity data and species trait data</a></li>
<li class="chapter" data-level="6.6" data-path="foraging-guild.html"><a href="foraging-guild.html#testing-the-differences-among-foraging-guild-categories-using-wilcoxon-test"><i class="fa fa-check"></i><b>6.6</b> Testing the differences among foraging guild categories using Wilcoxon test</a></li>
<li class="chapter" data-level="6.7" data-path="foraging-guild.html"><a href="foraging-guild.html#comparing-vocal-activity-at-dawn-between-foraging-guilds"><i class="fa fa-check"></i><b>6.7</b> Comparing vocal activity at dawn between foraging guilds</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="territoriality.html"><a href="territoriality.html"><i class="fa fa-check"></i><b>7</b> Territoriality</a>
<ul>
<li class="chapter" data-level="7.1" data-path="territoriality.html"><a href="territoriality.html#loading-necessary-libraries"><i class="fa fa-check"></i><b>7.1</b> Loading necessary libraries</a></li>
<li class="chapter" data-level="7.2" data-path="territoriality.html"><a href="territoriality.html#loading-territoriality-data"><i class="fa fa-check"></i><b>7.2</b> Loading territoriality data</a></li>
<li class="chapter" data-level="7.3" data-path="territoriality.html"><a href="territoriality.html#load-acoustic-data-and-species-scientific-names-data-4"><i class="fa fa-check"></i><b>7.3</b> Load acoustic data and species scientific names data</a></li>
<li class="chapter" data-level="7.4" data-path="territoriality.html"><a href="territoriality.html#filtering-acoustic-data-to-ensure-sampling-periods-are-even-across-dawn-and-dusk-4"><i class="fa fa-check"></i><b>7.4</b> Filtering acoustic data to ensure sampling periods are even across dawn and dusk</a></li>
<li class="chapter" data-level="7.5" data-path="territoriality.html"><a href="territoriality.html#vocal-activity-across-time-periods-2"><i class="fa fa-check"></i><b>7.5</b> Vocal activity across time periods</a></li>
<li class="chapter" data-level="7.6" data-path="territoriality.html"><a href="territoriality.html#join-the-vocal_activity-data-and-territoriality-data"><i class="fa fa-check"></i><b>7.6</b> Join the vocal_activity data and territoriality data</a></li>
<li class="chapter" data-level="7.7" data-path="territoriality.html"><a href="territoriality.html#testing-the-differences-between-territoriality-categories-using-wilcoxon-test"><i class="fa fa-check"></i><b>7.7</b> Testing the differences between territoriality categories using Wilcoxon test</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="sociality.html"><a href="sociality.html"><i class="fa fa-check"></i><b>8</b> Sociality</a>
<ul>
<li class="chapter" data-level="8.1" data-path="sociality.html"><a href="sociality.html#loading-necessary-libraries-1"><i class="fa fa-check"></i><b>8.1</b> Loading necessary libraries</a></li>
<li class="chapter" data-level="8.2" data-path="sociality.html"><a href="sociality.html#loading-sociality-data"><i class="fa fa-check"></i><b>8.2</b> Loading sociality data</a></li>
<li class="chapter" data-level="8.3" data-path="sociality.html"><a href="sociality.html#load-acoustic-data-and-species-scientific-names-data-5"><i class="fa fa-check"></i><b>8.3</b> Load acoustic data and species scientific names data</a></li>
<li class="chapter" data-level="8.4" data-path="sociality.html"><a href="sociality.html#filtering-acoustic-data-to-ensure-sampling-periods-are-even-across-dawn-and-dusk-5"><i class="fa fa-check"></i><b>8.4</b> Filtering acoustic data to ensure sampling periods are even across dawn and dusk</a></li>
<li class="chapter" data-level="8.5" data-path="sociality.html"><a href="sociality.html#vocal-activity-across-time-periods-3"><i class="fa fa-check"></i><b>8.5</b> Vocal activity across time periods</a></li>
<li class="chapter" data-level="8.6" data-path="sociality.html"><a href="sociality.html#join-the-vocal_activity-data-and-sociality-data"><i class="fa fa-check"></i><b>8.6</b> Join the vocal_activity data and sociality data</a></li>
<li class="chapter" data-level="8.7" data-path="sociality.html"><a href="sociality.html#testing-the-differences-between-socialiaty-categories-using-wilcoxon-test"><i class="fa fa-check"></i><b>8.7</b> Testing the differences between socialiaty categories using Wilcoxon test</a></li>
<li class="chapter" data-level="8.8" data-path="sociality.html"><a href="sociality.html#visualization-of-vocal-activity-at-dawn-vs.-categories-of-sociality"><i class="fa fa-check"></i><b>8.8</b> Visualization of vocal activity at dawn vs. categories of sociality</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html"><i class="fa fa-check"></i><b>9</b> Phylogenetic Generalized Least Squares (PGLS) regressions</a>
<ul>
<li class="chapter" data-level="9.1" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#loading-necessary-libraries-2"><i class="fa fa-check"></i><b>9.1</b> Loading necessary libraries</a></li>
<li class="chapter" data-level="9.2" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#loading-necessary-data"><i class="fa fa-check"></i><b>9.2</b> Loading necessary data</a></li>
<li class="chapter" data-level="9.3" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#getting-the-maximum-credibility-tree-from-the-nexus-file"><i class="fa fa-check"></i><b>9.3</b> Getting the maximum credibility tree from the nexus file</a></li>
<li class="chapter" data-level="9.4" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#filtering-acoustic-data-to-ensure-sampling-periods-are-even-across-dawn-and-dusk-6"><i class="fa fa-check"></i><b>9.4</b> Filtering acoustic data to ensure sampling periods are even across dawn and dusk</a></li>
<li class="chapter" data-level="9.5" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#vocal-activity-2"><i class="fa fa-check"></i><b>9.5</b> Vocal Activity</a></li>
<li class="chapter" data-level="9.6" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#light-availability-1"><i class="fa fa-check"></i><b>9.6</b> Light availability</a></li>
<li class="chapter" data-level="9.7" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#territoriality-1"><i class="fa fa-check"></i><b>9.7</b> Territoriality</a></li>
<li class="chapter" data-level="9.8" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#sociality-1"><i class="fa fa-check"></i><b>9.8</b> Sociality</a></li>
<li class="chapter" data-level="9.9" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#peak-frequency"><i class="fa fa-check"></i><b>9.9</b> Peak frequency</a></li>
<li class="chapter" data-level="9.10" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#foraging-guild-1"><i class="fa fa-check"></i><b>9.10</b> Foraging guild</a></li>
<li class="chapter" data-level="9.11" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#data-cleaning-1"><i class="fa fa-check"></i><b>9.11</b> Data cleaning</a></li>
<li class="chapter" data-level="9.12" data-path="phylogenetic-generalized-least-squares-pgls-regressions.html"><a href="phylogenetic-generalized-least-squares-pgls-regressions.html#pgls-analysis"><i class="fa fa-check"></i><b>9.12</b> PGLS analysis</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Source code and supporting information for <em>Drivers of diurnal variation in vocal activity in a tropical bird community</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="light-availability" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Section 5</span> Light availability<a href="light-availability.html#light-availability" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this script, we examine differences in vocal activity between dawn and dusk as a function of light availability. The expectation is that species would call much earlier in the day, closer to sunrise compared to later in the day when one could spend time foraging.</p>
<div id="install-necessary-libraries-2" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Install necessary libraries<a href="light-availability.html#install-necessary-libraries-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="light-availability.html#cb20-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb20-2"><a href="light-availability.html#cb20-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb20-3"><a href="light-availability.html#cb20-3" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb20-4"><a href="light-availability.html#cb20-4" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb20-5"><a href="light-availability.html#cb20-5" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb20-6"><a href="light-availability.html#cb20-6" tabindex="-1"></a><span class="fu">library</span>(scico)</span>
<span id="cb20-7"><a href="light-availability.html#cb20-7" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb20-8"><a href="light-availability.html#cb20-8" tabindex="-1"></a><span class="fu">library</span>(extrafont)</span>
<span id="cb20-9"><a href="light-availability.html#cb20-9" tabindex="-1"></a><span class="fu">library</span>(ggstatsplot)</span>
<span id="cb20-10"><a href="light-availability.html#cb20-10" tabindex="-1"></a><span class="fu">library</span>(suncalc)</span>
<span id="cb20-11"><a href="light-availability.html#cb20-11" tabindex="-1"></a><span class="fu">library</span>(lutz)</span>
<span id="cb20-12"><a href="light-availability.html#cb20-12" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb20-13"><a href="light-availability.html#cb20-13" tabindex="-1"></a><span class="fu">library</span>(ggpmisc)</span>
<span id="cb20-14"><a href="light-availability.html#cb20-14" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb20-15"><a href="light-availability.html#cb20-15" tabindex="-1"></a><span class="fu">library</span>(hms)</span>
<span id="cb20-16"><a href="light-availability.html#cb20-16" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span></code></pre></div>
</div>
<div id="load-acoustic-data-and-species-scientific-names-data-2" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Load acoustic data and species scientific names data<a href="light-availability.html#load-acoustic-data-and-species-scientific-names-data-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="light-availability.html#cb21-1" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;results/acoustic_data.csv&quot;</span>)</span>
<span id="cb21-2"><a href="light-availability.html#cb21-2" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/list-of-sites.csv&quot;</span>)</span>
<span id="cb21-3"><a href="light-availability.html#cb21-3" tabindex="-1"></a>species_codes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/species-annotation-codes.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="filtering-acoustic-data-to-ensure-sampling-periods-are-even-across-dawn-and-dusk-2" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Filtering acoustic data to ensure sampling periods are even across dawn and dusk<a href="light-availability.html#filtering-acoustic-data-to-ensure-sampling-periods-are-even-across-dawn-and-dusk-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Since our recording schedule was uneven (6am to 10am in the morning and 4pm to 7pm in the evening), we filter acoustic data to retain recordings between 6am and 830am and recordings made between 4pm and 630pm so that the two sampling windows capture a similar amount of time right after dawn and right before dusk.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="light-availability.html#cb22-1" tabindex="-1"></a>dawn <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="light-availability.html#cb22-2" tabindex="-1"></a>  <span class="fu">group_by</span>(time_of_day <span class="sc">==</span> <span class="st">&quot;dawn&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="light-availability.html#cb22-3" tabindex="-1"></a>  <span class="fu">filter</span>(start_time <span class="sc">&gt;=</span> <span class="dv">060000</span> <span class="sc">&amp;</span> start_time <span class="sc">&lt;=</span> <span class="dv">083000</span>)</span>
<span id="cb22-4"><a href="light-availability.html#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="light-availability.html#cb22-5" tabindex="-1"></a>dusk <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="light-availability.html#cb22-6" tabindex="-1"></a>  <span class="fu">group_by</span>(time_of_day <span class="sc">==</span> <span class="st">&quot;dusk&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="light-availability.html#cb22-7" tabindex="-1"></a>  <span class="fu">filter</span>(start_time <span class="sc">&gt;=</span> <span class="dv">160000</span> <span class="sc">&amp;</span> start_time <span class="sc">&lt;=</span> <span class="dv">183000</span>)</span>
<span id="cb22-8"><a href="light-availability.html#cb22-8" tabindex="-1"></a></span>
<span id="cb22-9"><a href="light-availability.html#cb22-9" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dawn[, <span class="sc">-</span><span class="dv">10</span>], dusk[, <span class="sc">-</span><span class="dv">10</span>])</span></code></pre></div>
</div>
<div id="vocal-activity-1" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Vocal Activity<a href="light-availability.html#vocal-activity-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We use normalized percent detections (percent detections which account for sampling effort) as a response variable in our PGLS analysis.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="light-availability.html#cb23-1" tabindex="-1"></a><span class="co"># sampling effort by time_of_day</span></span>
<span id="cb23-2"><a href="light-availability.html#cb23-2" tabindex="-1"></a>effort <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="light-availability.html#cb23-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, date, time_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="light-availability.html#cb23-4" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="light-availability.html#cb23-5" tabindex="-1"></a>  <span class="fu">arrange</span>(time_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="light-availability.html#cb23-6" tabindex="-1"></a>  <span class="fu">count</span>(time_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="light-availability.html#cb23-7" tabindex="-1"></a>  <span class="fu">rename</span>(., <span class="at">nVisits =</span> n)</span>
<span id="cb23-8"><a href="light-availability.html#cb23-8" tabindex="-1"></a></span>
<span id="cb23-9"><a href="light-availability.html#cb23-9" tabindex="-1"></a><span class="co"># Above, we note that we had sampled ~145 site-date combinations at dawn, while ~230 site-date combinations were sampled at dusk</span></span>
<span id="cb23-10"><a href="light-availability.html#cb23-10" tabindex="-1"></a></span>
<span id="cb23-11"><a href="light-availability.html#cb23-11" tabindex="-1"></a><span class="co"># total number of acoustic detections summarized across every 10-s audio file</span></span>
<span id="cb23-12"><a href="light-availability.html#cb23-12" tabindex="-1"></a><span class="co"># here, we estimate % detections at dawn and dusk, while accounting for sampling effort</span></span>
<span id="cb23-13"><a href="light-availability.html#cb23-13" tabindex="-1"></a>vocal_act <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb23-14"><a href="light-availability.html#cb23-14" tabindex="-1"></a>  <span class="fu">group_by</span>(time_of_day, eBird_codes) <span class="sc">%&gt;%</span></span>
<span id="cb23-15"><a href="light-availability.html#cb23-15" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">detections =</span> <span class="fu">sum</span>(number)) <span class="sc">%&gt;%</span></span>
<span id="cb23-16"><a href="light-availability.html#cb23-16" tabindex="-1"></a>  <span class="fu">left_join</span>(., species_codes[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)],</span>
<span id="cb23-17"><a href="light-availability.html#cb23-17" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">&quot;eBird_codes&quot;</span></span>
<span id="cb23-18"><a href="light-availability.html#cb23-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb23-19"><a href="light-availability.html#cb23-19" tabindex="-1"></a>  <span class="fu">group_by</span>(eBird_codes) <span class="sc">%&gt;%</span></span>
<span id="cb23-20"><a href="light-availability.html#cb23-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_detections =</span> <span class="fu">sum</span>(detections)) <span class="sc">%&gt;%</span></span>
<span id="cb23-21"><a href="light-availability.html#cb23-21" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_detections =</span> (detections <span class="sc">/</span> total_detections) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-22"><a href="light-availability.html#cb23-22" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb23-23"><a href="light-availability.html#cb23-23" tabindex="-1"></a></span>
<span id="cb23-24"><a href="light-availability.html#cb23-24" tabindex="-1"></a><span class="do">## accouting for sampling effort and normalizing data</span></span>
<span id="cb23-25"><a href="light-availability.html#cb23-25" tabindex="-1"></a>vocal_act <span class="ot">&lt;-</span> vocal_act <span class="sc">%&gt;%</span></span>
<span id="cb23-26"><a href="light-availability.html#cb23-26" tabindex="-1"></a>  <span class="fu">left_join</span>(., effort, <span class="at">by =</span> <span class="st">&quot;time_of_day&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-27"><a href="light-availability.html#cb23-27" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">normalized_detections =</span> detections <span class="sc">/</span> nVisits) <span class="sc">%&gt;%</span></span>
<span id="cb23-28"><a href="light-availability.html#cb23-28" tabindex="-1"></a>  <span class="fu">group_by</span>(eBird_codes) <span class="sc">%&gt;%</span></span>
<span id="cb23-29"><a href="light-availability.html#cb23-29" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_normalized_detections =</span> <span class="fu">sum</span>(normalized_detections)) <span class="sc">%&gt;%</span></span>
<span id="cb23-30"><a href="light-availability.html#cb23-30" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_normalized_detections =</span> (normalized_detections <span class="sc">/</span> total_normalized_detections) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-31"><a href="light-availability.html#cb23-31" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
</div>
<div id="extract-light-availability-for-each-date" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Extract light availability for each date<a href="light-availability.html#extract-light-availability-for-each-date" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="light-availability.html#cb24-1" tabindex="-1"></a><span class="co"># add longitude and latitude to acoustic_data</span></span>
<span id="cb24-2"><a href="light-availability.html#cb24-2" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(acoustic_data, sites[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>)],</span>
<span id="cb24-3"><a href="light-availability.html#cb24-3" tabindex="-1"></a>  <span class="at">by =</span> <span class="st">&quot;site_id&quot;</span></span>
<span id="cb24-4"><a href="light-availability.html#cb24-4" tabindex="-1"></a>)</span>
<span id="cb24-5"><a href="light-availability.html#cb24-5" tabindex="-1"></a>acoustic_data<span class="sc">$</span>date <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">ymd</span>(acoustic_data<span class="sc">$</span>date)</span>
<span id="cb24-6"><a href="light-availability.html#cb24-6" tabindex="-1"></a><span class="fu">names</span>(acoustic_data)[<span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">11</span>)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>)</span>
<span id="cb24-7"><a href="light-availability.html#cb24-7" tabindex="-1"></a></span>
<span id="cb24-8"><a href="light-availability.html#cb24-8" tabindex="-1"></a><span class="co"># find out what time zone needs to be provided for the sunlight calculations</span></span>
<span id="cb24-9"><a href="light-availability.html#cb24-9" tabindex="-1"></a>acoustic_data<span class="sc">$</span>tz <span class="ot">&lt;-</span> <span class="fu">tz_lookup_coords</span>(</span>
<span id="cb24-10"><a href="light-availability.html#cb24-10" tabindex="-1"></a>  <span class="at">lat =</span> acoustic_data<span class="sc">$</span>lat,</span>
<span id="cb24-11"><a href="light-availability.html#cb24-11" tabindex="-1"></a>  <span class="at">lon =</span> acoustic_data<span class="sc">$</span>lon,</span>
<span id="cb24-12"><a href="light-availability.html#cb24-12" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;accurate&quot;</span>,</span>
<span id="cb24-13"><a href="light-availability.html#cb24-13" tabindex="-1"></a>  <span class="at">warn =</span> <span class="cn">FALSE</span></span>
<span id="cb24-14"><a href="light-availability.html#cb24-14" tabindex="-1"></a>)</span>
<span id="cb24-15"><a href="light-availability.html#cb24-15" tabindex="-1"></a></span>
<span id="cb24-16"><a href="light-availability.html#cb24-16" tabindex="-1"></a><span class="co"># extract nauticalDawn, nauticalDusk, sunrise and sunset times</span></span>
<span id="cb24-17"><a href="light-availability.html#cb24-17" tabindex="-1"></a>light_data <span class="ot">&lt;-</span> <span class="fu">getSunlightTimes</span>(</span>
<span id="cb24-18"><a href="light-availability.html#cb24-18" tabindex="-1"></a>  <span class="at">data =</span> acoustic_data,</span>
<span id="cb24-19"><a href="light-availability.html#cb24-19" tabindex="-1"></a>  <span class="at">keep =</span> <span class="fu">c</span>(</span>
<span id="cb24-20"><a href="light-availability.html#cb24-20" tabindex="-1"></a>    <span class="st">&quot;sunrise&quot;</span>, <span class="st">&quot;sunset&quot;</span>,</span>
<span id="cb24-21"><a href="light-availability.html#cb24-21" tabindex="-1"></a>    <span class="st">&quot;nauticalDawn&quot;</span>, <span class="st">&quot;nauticalDusk&quot;</span></span>
<span id="cb24-22"><a href="light-availability.html#cb24-22" tabindex="-1"></a>  ),</span>
<span id="cb24-23"><a href="light-availability.html#cb24-23" tabindex="-1"></a>  <span class="at">tz =</span> <span class="st">&quot;Asia/Kolkata&quot;</span></span>
<span id="cb24-24"><a href="light-availability.html#cb24-24" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(.)</span>
<span id="cb24-25"><a href="light-availability.html#cb24-25" tabindex="-1"></a></span>
<span id="cb24-26"><a href="light-availability.html#cb24-26" tabindex="-1"></a><span class="co"># strip dates from new columms and keep only time</span></span>
<span id="cb24-27"><a href="light-availability.html#cb24-27" tabindex="-1"></a>light_data<span class="sc">$</span>sunrise <span class="ot">&lt;-</span> <span class="fu">as_hms</span>(light_data<span class="sc">$</span>sunrise)</span>
<span id="cb24-28"><a href="light-availability.html#cb24-28" tabindex="-1"></a>light_data<span class="sc">$</span>sunset <span class="ot">&lt;-</span> <span class="fu">as_hms</span>(light_data<span class="sc">$</span>sunset)</span>
<span id="cb24-29"><a href="light-availability.html#cb24-29" tabindex="-1"></a>light_data<span class="sc">$</span>nauticalDawn <span class="ot">&lt;-</span> <span class="fu">as_hms</span>(light_data<span class="sc">$</span>nauticalDawn)</span>
<span id="cb24-30"><a href="light-availability.html#cb24-30" tabindex="-1"></a>light_data<span class="sc">$</span>nauticalDusk <span class="ot">&lt;-</span> <span class="fu">as_hms</span>(light_data<span class="sc">$</span>nauticalDusk)</span>
<span id="cb24-31"><a href="light-availability.html#cb24-31" tabindex="-1"></a></span>
<span id="cb24-32"><a href="light-availability.html#cb24-32" tabindex="-1"></a><span class="co"># summarize detections of species for every 15-min window</span></span>
<span id="cb24-33"><a href="light-availability.html#cb24-33" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb24-34"><a href="light-availability.html#cb24-34" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb24-35"><a href="light-availability.html#cb24-35" tabindex="-1"></a>    site_id, date, start_time, time_of_day, eBird_codes,</span>
<span id="cb24-36"><a href="light-availability.html#cb24-36" tabindex="-1"></a>    lon, lat, hour_of_day</span>
<span id="cb24-37"><a href="light-availability.html#cb24-37" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb24-38"><a href="light-availability.html#cb24-38" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">detections =</span> <span class="fu">sum</span>(number)) <span class="sc">%&gt;%</span></span>
<span id="cb24-39"><a href="light-availability.html#cb24-39" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb24-40"><a href="light-availability.html#cb24-40" tabindex="-1"></a></span>
<span id="cb24-41"><a href="light-availability.html#cb24-41" tabindex="-1"></a><span class="co"># join the two datasets</span></span>
<span id="cb24-42"><a href="light-availability.html#cb24-42" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(acoustic_data, light_data,</span>
<span id="cb24-43"><a href="light-availability.html#cb24-43" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;date&quot;</span>, <span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>)</span>
<span id="cb24-44"><a href="light-availability.html#cb24-44" tabindex="-1"></a>)</span>
<span id="cb24-45"><a href="light-availability.html#cb24-45" tabindex="-1"></a></span>
<span id="cb24-46"><a href="light-availability.html#cb24-46" tabindex="-1"></a><span class="co"># format the start_time column in the acoustic data to keep it as the same format as light_data</span></span>
<span id="cb24-47"><a href="light-availability.html#cb24-47" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb24-48"><a href="light-availability.html#cb24-48" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(start_time, str_pad, <span class="at">width =</span> <span class="dv">6</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>))</span>
<span id="cb24-49"><a href="light-availability.html#cb24-49" tabindex="-1"></a>acoustic_data<span class="sc">$</span>start_time <span class="ot">&lt;-</span> <span class="fu">format</span>(<span class="fu">strptime</span>(acoustic_data<span class="sc">$</span>start_time,</span>
<span id="cb24-50"><a href="light-availability.html#cb24-50" tabindex="-1"></a>  <span class="at">format =</span> <span class="st">&quot;%H%M%S&quot;</span></span>
<span id="cb24-51"><a href="light-availability.html#cb24-51" tabindex="-1"></a>), <span class="at">format =</span> <span class="st">&quot;%H:%M:%S&quot;</span>)</span>
<span id="cb24-52"><a href="light-availability.html#cb24-52" tabindex="-1"></a>acoustic_data<span class="sc">$</span>start_time <span class="ot">&lt;-</span> <span class="fu">as_hms</span>(acoustic_data<span class="sc">$</span>start_time)</span>
<span id="cb24-53"><a href="light-availability.html#cb24-53" tabindex="-1"></a></span>
<span id="cb24-54"><a href="light-availability.html#cb24-54" tabindex="-1"></a><span class="co"># add end_times for each recording</span></span>
<span id="cb24-55"><a href="light-availability.html#cb24-55" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb24-56"><a href="light-availability.html#cb24-56" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">end_time =</span> start_time <span class="sc">+</span> <span class="fu">dminutes</span>(<span class="dv">20</span>))</span>
<span id="cb24-57"><a href="light-availability.html#cb24-57" tabindex="-1"></a>acoustic_data<span class="sc">$</span>end_time <span class="ot">&lt;-</span> <span class="fu">as_hms</span>(acoustic_data<span class="sc">$</span>end_time)</span>
<span id="cb24-58"><a href="light-availability.html#cb24-58" tabindex="-1"></a></span>
<span id="cb24-59"><a href="light-availability.html#cb24-59" tabindex="-1"></a><span class="co"># subtract times from sunrise, sunset, nauticalDawn and nauticalDusk from start_time of acoustic detections</span></span>
<span id="cb24-60"><a href="light-availability.html#cb24-60" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb24-61"><a href="light-availability.html#cb24-61" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_from_dawn =</span> <span class="fu">as.numeric</span>((start_time <span class="sc">-</span> nauticalDawn),</span>
<span id="cb24-62"><a href="light-availability.html#cb24-62" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;hours&quot;</span></span>
<span id="cb24-63"><a href="light-availability.html#cb24-63" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb24-64"><a href="light-availability.html#cb24-64" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_from_sunrise =</span> <span class="fu">as.numeric</span>((start_time <span class="sc">-</span> sunrise),</span>
<span id="cb24-65"><a href="light-availability.html#cb24-65" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;hours&quot;</span></span>
<span id="cb24-66"><a href="light-availability.html#cb24-66" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb24-67"><a href="light-availability.html#cb24-67" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_to_dusk =</span> <span class="fu">as.numeric</span>((nauticalDusk <span class="sc">-</span> end_time),</span>
<span id="cb24-68"><a href="light-availability.html#cb24-68" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;hours&quot;</span></span>
<span id="cb24-69"><a href="light-availability.html#cb24-69" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb24-70"><a href="light-availability.html#cb24-70" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_to_sunset =</span> <span class="fu">as.numeric</span>((sunset <span class="sc">-</span> end_time),</span>
<span id="cb24-71"><a href="light-availability.html#cb24-71" tabindex="-1"></a>    <span class="at">units =</span> <span class="st">&quot;hours&quot;</span></span>
<span id="cb24-72"><a href="light-availability.html#cb24-72" tabindex="-1"></a>  ))</span></code></pre></div>
</div>
<div id="model-acoustic-detections-as-a-function-of-light-availability" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Model acoustic detections as a function of light availability<a href="light-availability.html#model-acoustic-detections-as-a-function-of-light-availability" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here, we choose times of day as proxies for light availability (ie. nautical dawn, dusk for example).</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="light-availability.html#cb25-1" tabindex="-1"></a><span class="co"># Here, we make the assumption that light levels are fairly similar closer to dawn and closer to dusk. Hence, we model the number of acoustic detections as a function of time to dusk and time from dawn.</span></span>
<span id="cb25-2"><a href="light-availability.html#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="light-availability.html#cb25-3" tabindex="-1"></a><span class="co"># add species_codes/common_name to the above dataset</span></span>
<span id="cb25-4"><a href="light-availability.html#cb25-4" tabindex="-1"></a>acoustic_data <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="light-availability.html#cb25-5" tabindex="-1"></a>  <span class="fu">left_join</span>(., species_codes[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)],</span>
<span id="cb25-6"><a href="light-availability.html#cb25-6" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">&quot;eBird_codes&quot;</span></span>
<span id="cb25-7"><a href="light-availability.html#cb25-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb25-8"><a href="light-availability.html#cb25-8" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb25-9"><a href="light-availability.html#cb25-9" tabindex="-1"></a></span>
<span id="cb25-10"><a href="light-availability.html#cb25-10" tabindex="-1"></a><span class="co"># visualization</span></span>
<span id="cb25-11"><a href="light-availability.html#cb25-11" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb25-12"><a href="light-availability.html#cb25-12" tabindex="-1"></a></span>
<span id="cb25-13"><a href="light-availability.html#cb25-13" tabindex="-1"></a><span class="co"># collect slope and other coefficient information here</span></span>
<span id="cb25-14"><a href="light-availability.html#cb25-14" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb25-15"><a href="light-availability.html#cb25-15" tabindex="-1"></a></span>
<span id="cb25-16"><a href="light-availability.html#cb25-16" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(acoustic_data<span class="sc">$</span>common_name))) {</span>
<span id="cb25-17"><a href="light-availability.html#cb25-17" tabindex="-1"></a>  <span class="co"># extract species common_name</span></span>
<span id="cb25-18"><a href="light-availability.html#cb25-18" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="fu">unique</span>(acoustic_data<span class="sc">$</span>common_name)[i]</span>
<span id="cb25-19"><a href="light-availability.html#cb25-19" tabindex="-1"></a></span>
<span id="cb25-20"><a href="light-availability.html#cb25-20" tabindex="-1"></a>  <span class="co"># subset data for plotting</span></span>
<span id="cb25-21"><a href="light-availability.html#cb25-21" tabindex="-1"></a>  sp <span class="ot">&lt;-</span> acoustic_data[acoustic_data<span class="sc">$</span>common_name <span class="sc">==</span> a, ]</span>
<span id="cb25-22"><a href="light-availability.html#cb25-22" tabindex="-1"></a></span>
<span id="cb25-23"><a href="light-availability.html#cb25-23" tabindex="-1"></a>  <span class="co"># bind dawn and dusk data together</span></span>
<span id="cb25-24"><a href="light-availability.html#cb25-24" tabindex="-1"></a>  dawn <span class="ot">&lt;-</span> sp <span class="sc">%&gt;%</span></span>
<span id="cb25-25"><a href="light-availability.html#cb25-25" tabindex="-1"></a>    <span class="fu">filter</span>(time_of_day <span class="sc">==</span> <span class="st">&quot;dawn&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-26"><a href="light-availability.html#cb25-26" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(detections, time_from_dawn, time_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb25-27"><a href="light-availability.html#cb25-27" tabindex="-1"></a>    <span class="fu">rename</span>(., <span class="at">time_from_startTime =</span> time_from_dawn)</span>
<span id="cb25-28"><a href="light-availability.html#cb25-28" tabindex="-1"></a></span>
<span id="cb25-29"><a href="light-availability.html#cb25-29" tabindex="-1"></a>  dusk <span class="ot">&lt;-</span> sp <span class="sc">%&gt;%</span></span>
<span id="cb25-30"><a href="light-availability.html#cb25-30" tabindex="-1"></a>    <span class="fu">filter</span>(time_of_day <span class="sc">==</span> <span class="st">&quot;dusk&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-31"><a href="light-availability.html#cb25-31" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(detections, time_to_dusk, time_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb25-32"><a href="light-availability.html#cb25-32" tabindex="-1"></a>    <span class="fu">rename</span>(., <span class="at">time_from_startTime =</span> time_to_dusk)</span>
<span id="cb25-33"><a href="light-availability.html#cb25-33" tabindex="-1"></a></span>
<span id="cb25-34"><a href="light-availability.html#cb25-34" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dawn, dusk)</span>
<span id="cb25-35"><a href="light-availability.html#cb25-35" tabindex="-1"></a></span>
<span id="cb25-36"><a href="light-availability.html#cb25-36" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">grouped_ggscatterstats</span>(data,</span>
<span id="cb25-37"><a href="light-availability.html#cb25-37" tabindex="-1"></a>    <span class="at">x =</span> time_from_startTime,</span>
<span id="cb25-38"><a href="light-availability.html#cb25-38" tabindex="-1"></a>    <span class="at">y =</span> detections,</span>
<span id="cb25-39"><a href="light-availability.html#cb25-39" tabindex="-1"></a>    <span class="at">ylab =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st"> Number of acoustic detections&quot;</span>,</span>
<span id="cb25-40"><a href="light-availability.html#cb25-40" tabindex="-1"></a>    <span class="at">xlab =</span> <span class="st">&quot;Time to darkness</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb25-41"><a href="light-availability.html#cb25-41" tabindex="-1"></a>    <span class="at">grouping.var =</span> time_of_day,</span>
<span id="cb25-42"><a href="light-availability.html#cb25-42" tabindex="-1"></a>    <span class="at">annotation.args =</span> <span class="fu">list</span>(<span class="at">title =</span> a),</span>
<span id="cb25-43"><a href="light-availability.html#cb25-43" tabindex="-1"></a>    <span class="at">plotgrid.args =</span> <span class="fu">list</span>(<span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">1</span>),</span>
<span id="cb25-44"><a href="light-availability.html#cb25-44" tabindex="-1"></a>    <span class="at">ggplot.component =</span> <span class="fu">list</span>(<span class="fu">theme</span>(</span>
<span id="cb25-45"><a href="light-availability.html#cb25-45" tabindex="-1"></a>      <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>, <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb25-46"><a href="light-availability.html#cb25-46" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb25-47"><a href="light-availability.html#cb25-47" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span></span>
<span id="cb25-48"><a href="light-availability.html#cb25-48" tabindex="-1"></a>      ),</span>
<span id="cb25-49"><a href="light-availability.html#cb25-49" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb25-50"><a href="light-availability.html#cb25-50" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb25-51"><a href="light-availability.html#cb25-51" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#1b2838&quot;</span></span>
<span id="cb25-52"><a href="light-availability.html#cb25-52" tabindex="-1"></a>      ),</span>
<span id="cb25-53"><a href="light-availability.html#cb25-53" tabindex="-1"></a>      <span class="at">axis.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb25-54"><a href="light-availability.html#cb25-54" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb25-55"><a href="light-availability.html#cb25-55" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span></span>
<span id="cb25-56"><a href="light-availability.html#cb25-56" tabindex="-1"></a>      )</span>
<span id="cb25-57"><a href="light-availability.html#cb25-57" tabindex="-1"></a>    ))</span>
<span id="cb25-58"><a href="light-availability.html#cb25-58" tabindex="-1"></a>  )</span>
<span id="cb25-59"><a href="light-availability.html#cb25-59" tabindex="-1"></a></span>
<span id="cb25-60"><a href="light-availability.html#cb25-60" tabindex="-1"></a>  <span class="do">## save plot object</span></span>
<span id="cb25-61"><a href="light-availability.html#cb25-61" tabindex="-1"></a>  plots[[i]] <span class="ot">&lt;-</span> p</span>
<span id="cb25-62"><a href="light-availability.html#cb25-62" tabindex="-1"></a></span>
<span id="cb25-63"><a href="light-availability.html#cb25-63" tabindex="-1"></a>  <span class="co"># extract_stats</span></span>
<span id="cb25-64"><a href="light-availability.html#cb25-64" tabindex="-1"></a>  dawn_metadata <span class="ot">&lt;-</span> <span class="fu">extract_stats</span>(p[[<span class="dv">1</span><span class="dt">L</span>]])</span>
<span id="cb25-65"><a href="light-availability.html#cb25-65" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(dawn_metadata<span class="sc">$</span>subtitle_data) <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb25-66"><a href="light-availability.html#cb25-66" tabindex="-1"></a>    dawn_metadata <span class="ot">&lt;-</span> dawn_metadata<span class="sc">$</span>subtitle_data <span class="sc">%&gt;%</span></span>
<span id="cb25-67"><a href="light-availability.html#cb25-67" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">common_name =</span> a) <span class="sc">%&gt;%</span></span>
<span id="cb25-68"><a href="light-availability.html#cb25-68" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">time_of_day =</span> <span class="st">&quot;dawn&quot;</span>)</span>
<span id="cb25-69"><a href="light-availability.html#cb25-69" tabindex="-1"></a>  }</span>
<span id="cb25-70"><a href="light-availability.html#cb25-70" tabindex="-1"></a></span>
<span id="cb25-71"><a href="light-availability.html#cb25-71" tabindex="-1"></a>  dusk_metadata <span class="ot">&lt;-</span> <span class="fu">extract_stats</span>(p[[<span class="dv">2</span><span class="dt">L</span>]])</span>
<span id="cb25-72"><a href="light-availability.html#cb25-72" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(dusk_metadata<span class="sc">$</span>subtitle_data) <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb25-73"><a href="light-availability.html#cb25-73" tabindex="-1"></a>    dusk_metadata <span class="ot">&lt;-</span> dusk_metadata<span class="sc">$</span>subtitle_data <span class="sc">%&gt;%</span></span>
<span id="cb25-74"><a href="light-availability.html#cb25-74" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">common_name =</span> a) <span class="sc">%&gt;%</span></span>
<span id="cb25-75"><a href="light-availability.html#cb25-75" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">time_of_day =</span> <span class="st">&quot;dusk&quot;</span>)</span>
<span id="cb25-76"><a href="light-availability.html#cb25-76" tabindex="-1"></a>  }</span>
<span id="cb25-77"><a href="light-availability.html#cb25-77" tabindex="-1"></a></span>
<span id="cb25-78"><a href="light-availability.html#cb25-78" tabindex="-1"></a>  <span class="do">## add the above to the metadata object</span></span>
<span id="cb25-79"><a href="light-availability.html#cb25-79" tabindex="-1"></a>  metadata <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb25-80"><a href="light-availability.html#cb25-80" tabindex="-1"></a>    metadata, dawn_metadata,</span>
<span id="cb25-81"><a href="light-availability.html#cb25-81" tabindex="-1"></a>    dusk_metadata</span>
<span id="cb25-82"><a href="light-availability.html#cb25-82" tabindex="-1"></a>  )</span>
<span id="cb25-83"><a href="light-availability.html#cb25-83" tabindex="-1"></a>}</span>
<span id="cb25-84"><a href="light-availability.html#cb25-84" tabindex="-1"></a></span>
<span id="cb25-85"><a href="light-availability.html#cb25-85" tabindex="-1"></a><span class="co"># save as a single pdf</span></span>
<span id="cb25-86"><a href="light-availability.html#cb25-86" tabindex="-1"></a><span class="fu">cairo_pdf</span>(</span>
<span id="cb25-87"><a href="light-availability.html#cb25-87" tabindex="-1"></a>  <span class="at">filename =</span> <span class="st">&quot;figs/acoustic-detections-time-to-darkness.pdf&quot;</span>,</span>
<span id="cb25-88"><a href="light-availability.html#cb25-88" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">13</span>, <span class="at">height =</span> <span class="dv">12</span>,</span>
<span id="cb25-89"><a href="light-availability.html#cb25-89" tabindex="-1"></a>  <span class="at">onefile =</span> <span class="cn">TRUE</span></span>
<span id="cb25-90"><a href="light-availability.html#cb25-90" tabindex="-1"></a>)</span>
<span id="cb25-91"><a href="light-availability.html#cb25-91" tabindex="-1"></a>plots</span>
<span id="cb25-92"><a href="light-availability.html#cb25-92" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb25-93"><a href="light-availability.html#cb25-93" tabindex="-1"></a></span>
<span id="cb25-94"><a href="light-availability.html#cb25-94" tabindex="-1"></a><span class="co"># write metadata to file</span></span>
<span id="cb25-95"><a href="light-availability.html#cb25-95" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> <span class="fu">apply</span>(metadata, <span class="dv">2</span>, as.character)</span>
<span id="cb25-96"><a href="light-availability.html#cb25-96" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="fu">data.frame</span>(metadata), <span class="st">&quot;results/metadata-detections-lightAvailability-correlations.csv&quot;</span>, <span class="at">row.names =</span> F)</span></code></pre></div>
</div>
<div id="visualization-of-timing-of-vocalization" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Visualization of timing of vocalization<a href="light-availability.html#visualization-of-timing-of-vocalization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="light-availability.html#cb26-1" tabindex="-1"></a><span class="co"># sampling effort by hour_of_day</span></span>
<span id="cb26-2"><a href="light-availability.html#cb26-2" tabindex="-1"></a>effort <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="light-availability.html#cb26-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, date, hour_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="light-availability.html#cb26-4" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="light-availability.html#cb26-5" tabindex="-1"></a>  <span class="fu">arrange</span>(hour_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb26-6"><a href="light-availability.html#cb26-6" tabindex="-1"></a>  <span class="fu">count</span>(hour_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb26-7"><a href="light-availability.html#cb26-7" tabindex="-1"></a>  <span class="fu">rename</span>(., <span class="at">nVisits =</span> n)</span>
<span id="cb26-8"><a href="light-availability.html#cb26-8" tabindex="-1"></a></span>
<span id="cb26-9"><a href="light-availability.html#cb26-9" tabindex="-1"></a><span class="co"># visualization</span></span>
<span id="cb26-10"><a href="light-availability.html#cb26-10" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb26-11"><a href="light-availability.html#cb26-11" tabindex="-1"></a></span>
<span id="cb26-12"><a href="light-availability.html#cb26-12" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(acoustic_data<span class="sc">$</span>common_name))) {</span>
<span id="cb26-13"><a href="light-availability.html#cb26-13" tabindex="-1"></a>  <span class="co"># extract species common_name</span></span>
<span id="cb26-14"><a href="light-availability.html#cb26-14" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="fu">unique</span>(acoustic_data<span class="sc">$</span>common_name)[i]</span>
<span id="cb26-15"><a href="light-availability.html#cb26-15" tabindex="-1"></a></span>
<span id="cb26-16"><a href="light-availability.html#cb26-16" tabindex="-1"></a>  <span class="co"># subset data for plotting</span></span>
<span id="cb26-17"><a href="light-availability.html#cb26-17" tabindex="-1"></a>  sp <span class="ot">&lt;-</span> acoustic_data[acoustic_data<span class="sc">$</span>common_name <span class="sc">==</span> a, ] <span class="sc">%&gt;%</span></span>
<span id="cb26-18"><a href="light-availability.html#cb26-18" tabindex="-1"></a>    <span class="fu">group_by</span>(hour_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb26-19"><a href="light-availability.html#cb26-19" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">detections =</span> <span class="fu">sum</span>(detections)) <span class="sc">%&gt;%</span></span>
<span id="cb26-20"><a href="light-availability.html#cb26-20" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">total_detections =</span> <span class="fu">sum</span>(detections)) <span class="sc">%&gt;%</span></span>
<span id="cb26-21"><a href="light-availability.html#cb26-21" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb26-22"><a href="light-availability.html#cb26-22" tabindex="-1"></a></span>
<span id="cb26-23"><a href="light-availability.html#cb26-23" tabindex="-1"></a>  <span class="co"># normalize for sampling effort</span></span>
<span id="cb26-24"><a href="light-availability.html#cb26-24" tabindex="-1"></a>  sp <span class="ot">&lt;-</span> <span class="fu">left_join</span>(sp, effort, <span class="at">by =</span> <span class="st">&quot;hour_of_day&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-25"><a href="light-availability.html#cb26-25" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">normalized_detections =</span> (detections <span class="sc">/</span> nVisits)) <span class="sc">%&gt;%</span></span>
<span id="cb26-26"><a href="light-availability.html#cb26-26" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">total_normalized_detections =</span> <span class="fu">sum</span>(normalized_detections)) <span class="sc">%&gt;%</span></span>
<span id="cb26-27"><a href="light-availability.html#cb26-27" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">percent_normalized_detections =</span> (normalized_detections <span class="sc">/</span> total_normalized_detections) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-28"><a href="light-availability.html#cb26-28" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb26-29"><a href="light-availability.html#cb26-29" tabindex="-1"></a></span>
<span id="cb26-30"><a href="light-availability.html#cb26-30" tabindex="-1"></a>  <span class="co"># add a break/no data for mid-day</span></span>
<span id="cb26-31"><a href="light-availability.html#cb26-31" tabindex="-1"></a>  sp <span class="ot">&lt;-</span> sp <span class="sc">%&gt;%</span></span>
<span id="cb26-32"><a href="light-availability.html#cb26-32" tabindex="-1"></a>    <span class="fu">add_row</span>(</span>
<span id="cb26-33"><a href="light-availability.html#cb26-33" tabindex="-1"></a>      <span class="at">hour_of_day =</span> <span class="st">&quot;Mid-day&quot;</span>,</span>
<span id="cb26-34"><a href="light-availability.html#cb26-34" tabindex="-1"></a>      <span class="at">nVisits =</span> <span class="dv">0</span>,</span>
<span id="cb26-35"><a href="light-availability.html#cb26-35" tabindex="-1"></a>      <span class="at">detections =</span> <span class="dv">0</span>,</span>
<span id="cb26-36"><a href="light-availability.html#cb26-36" tabindex="-1"></a>      <span class="at">total_detections =</span> <span class="dv">0</span>,</span>
<span id="cb26-37"><a href="light-availability.html#cb26-37" tabindex="-1"></a>      <span class="at">normalized_detections =</span> <span class="dv">0</span>,</span>
<span id="cb26-38"><a href="light-availability.html#cb26-38" tabindex="-1"></a>      <span class="at">total_normalized_detections =</span> <span class="dv">0</span>,</span>
<span id="cb26-39"><a href="light-availability.html#cb26-39" tabindex="-1"></a>      <span class="at">percent_normalized_detections =</span> <span class="dv">0</span></span>
<span id="cb26-40"><a href="light-availability.html#cb26-40" tabindex="-1"></a>    )</span>
<span id="cb26-41"><a href="light-availability.html#cb26-41" tabindex="-1"></a></span>
<span id="cb26-42"><a href="light-availability.html#cb26-42" tabindex="-1"></a>  <span class="co"># reordering factors for plotting</span></span>
<span id="cb26-43"><a href="light-availability.html#cb26-43" tabindex="-1"></a>  sp<span class="sc">$</span>hour_of_day <span class="ot">&lt;-</span> <span class="fu">factor</span>(sp<span class="sc">$</span>hour_of_day, <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb26-44"><a href="light-availability.html#cb26-44" tabindex="-1"></a>    <span class="st">&quot;6AM to 7AM&quot;</span>,</span>
<span id="cb26-45"><a href="light-availability.html#cb26-45" tabindex="-1"></a>    <span class="st">&quot;7AM to 8AM&quot;</span>,</span>
<span id="cb26-46"><a href="light-availability.html#cb26-46" tabindex="-1"></a>    <span class="st">&quot;8AM to 9AM&quot;</span>,</span>
<span id="cb26-47"><a href="light-availability.html#cb26-47" tabindex="-1"></a>    <span class="st">&quot;Mid-day&quot;</span>,</span>
<span id="cb26-48"><a href="light-availability.html#cb26-48" tabindex="-1"></a>    <span class="st">&quot;4PM to 5PM&quot;</span>,</span>
<span id="cb26-49"><a href="light-availability.html#cb26-49" tabindex="-1"></a>    <span class="st">&quot;5PM to 6PM&quot;</span>,</span>
<span id="cb26-50"><a href="light-availability.html#cb26-50" tabindex="-1"></a>    <span class="st">&quot;6PM to 7PM&quot;</span></span>
<span id="cb26-51"><a href="light-availability.html#cb26-51" tabindex="-1"></a>  ))</span>
<span id="cb26-52"><a href="light-availability.html#cb26-52" tabindex="-1"></a></span>
<span id="cb26-53"><a href="light-availability.html#cb26-53" tabindex="-1"></a>  plots[[i]] <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sp, <span class="fu">aes</span>(</span>
<span id="cb26-54"><a href="light-availability.html#cb26-54" tabindex="-1"></a>    <span class="at">x =</span> hour_of_day,</span>
<span id="cb26-55"><a href="light-availability.html#cb26-55" tabindex="-1"></a>    <span class="at">y =</span> percent_normalized_detections</span>
<span id="cb26-56"><a href="light-availability.html#cb26-56" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb26-57"><a href="light-availability.html#cb26-57" tabindex="-1"></a>    <span class="fu">geom_bar</span>(</span>
<span id="cb26-58"><a href="light-availability.html#cb26-58" tabindex="-1"></a>      <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(),</span>
<span id="cb26-59"><a href="light-availability.html#cb26-59" tabindex="-1"></a>      <span class="at">fill =</span> <span class="st">&quot;#883107&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.9</span></span>
<span id="cb26-60"><a href="light-availability.html#cb26-60" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb26-61"><a href="light-availability.html#cb26-61" tabindex="-1"></a>    <span class="fu">geom_text</span>(</span>
<span id="cb26-62"><a href="light-availability.html#cb26-62" tabindex="-1"></a>      <span class="fu">aes</span>(</span>
<span id="cb26-63"><a href="light-availability.html#cb26-63" tabindex="-1"></a>        <span class="at">label =</span> <span class="fu">ifelse</span>(percent_normalized_detections <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb26-64"><a href="light-availability.html#cb26-64" tabindex="-1"></a>          <span class="fu">round</span>(percent_normalized_detections, <span class="dv">1</span>), <span class="st">&quot;&quot;</span></span>
<span id="cb26-65"><a href="light-availability.html#cb26-65" tabindex="-1"></a>        ),</span>
<span id="cb26-66"><a href="light-availability.html#cb26-66" tabindex="-1"></a>        <span class="at">hjust =</span> <span class="st">&quot;middle&quot;</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span></span>
<span id="cb26-67"><a href="light-availability.html#cb26-67" tabindex="-1"></a>      ),</span>
<span id="cb26-68"><a href="light-availability.html#cb26-68" tabindex="-1"></a>      <span class="at">position =</span> <span class="fu">position_dodge</span>(), <span class="at">angle =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">5</span></span>
<span id="cb26-69"><a href="light-availability.html#cb26-69" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb26-70"><a href="light-availability.html#cb26-70" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb26-71"><a href="light-availability.html#cb26-71" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb26-72"><a href="light-availability.html#cb26-72" tabindex="-1"></a>      <span class="at">title =</span> a,</span>
<span id="cb26-73"><a href="light-availability.html#cb26-73" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="st">&quot;Each bar represents the percent detections (normalized for sampling effort) across dawn and dusk&quot;</span>,</span>
<span id="cb26-74"><a href="light-availability.html#cb26-74" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st"> %acoustic detections&quot;</span>,</span>
<span id="cb26-75"><a href="light-availability.html#cb26-75" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Time of Day</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb26-76"><a href="light-availability.html#cb26-76" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb26-77"><a href="light-availability.html#cb26-77" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb26-78"><a href="light-availability.html#cb26-78" tabindex="-1"></a>      <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>, <span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb26-79"><a href="light-availability.html#cb26-79" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb26-80"><a href="light-availability.html#cb26-80" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span></span>
<span id="cb26-81"><a href="light-availability.html#cb26-81" tabindex="-1"></a>      ),</span>
<span id="cb26-82"><a href="light-availability.html#cb26-82" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb26-83"><a href="light-availability.html#cb26-83" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb26-84"><a href="light-availability.html#cb26-84" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;italic&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#1b2838&quot;</span></span>
<span id="cb26-85"><a href="light-availability.html#cb26-85" tabindex="-1"></a>      ),</span>
<span id="cb26-86"><a href="light-availability.html#cb26-86" tabindex="-1"></a>      <span class="at">axis.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb26-87"><a href="light-availability.html#cb26-87" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb26-88"><a href="light-availability.html#cb26-88" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span></span>
<span id="cb26-89"><a href="light-availability.html#cb26-89" tabindex="-1"></a>      )</span>
<span id="cb26-90"><a href="light-availability.html#cb26-90" tabindex="-1"></a>    )</span>
<span id="cb26-91"><a href="light-availability.html#cb26-91" tabindex="-1"></a>}</span>
<span id="cb26-92"><a href="light-availability.html#cb26-92" tabindex="-1"></a></span>
<span id="cb26-93"><a href="light-availability.html#cb26-93" tabindex="-1"></a><span class="co"># save as a single pdf</span></span>
<span id="cb26-94"><a href="light-availability.html#cb26-94" tabindex="-1"></a><span class="fu">cairo_pdf</span>(</span>
<span id="cb26-95"><a href="light-availability.html#cb26-95" tabindex="-1"></a>  <span class="at">filename =</span> <span class="st">&quot;figs/acoustic-detections-hour-of-day.pdf&quot;</span>,</span>
<span id="cb26-96"><a href="light-availability.html#cb26-96" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">13</span>, <span class="at">height =</span> <span class="dv">12</span>,</span>
<span id="cb26-97"><a href="light-availability.html#cb26-97" tabindex="-1"></a>  <span class="at">onefile =</span> <span class="cn">TRUE</span></span>
<span id="cb26-98"><a href="light-availability.html#cb26-98" tabindex="-1"></a>)</span>
<span id="cb26-99"><a href="light-availability.html#cb26-99" tabindex="-1"></a>plots</span>
<span id="cb26-100"><a href="light-availability.html#cb26-100" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
</div>
<div id="detections-vs.-median-time-to-darkness" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> %detections vs. median time to darkness<a href="light-availability.html#detections-vs.-median-time-to-darkness" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="light-availability.html#cb27-1" tabindex="-1"></a><span class="co"># extract median time to darkness for dawn and dusk</span></span>
<span id="cb27-2"><a href="light-availability.html#cb27-2" tabindex="-1"></a>dawn <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="light-availability.html#cb27-3" tabindex="-1"></a>  <span class="fu">group_by</span>(eBird_codes) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="light-availability.html#cb27-4" tabindex="-1"></a>  <span class="fu">filter</span>(time_of_day <span class="sc">==</span> <span class="st">&quot;dawn&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="light-availability.html#cb27-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(time_from_dawn, time_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="light-availability.html#cb27-6" tabindex="-1"></a>  <span class="fu">rename</span>(., <span class="at">time_from_startTime =</span> time_from_dawn) <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="light-availability.html#cb27-7" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">median_startTime =</span> <span class="fu">median</span>(time_from_startTime)) <span class="sc">%&gt;%</span></span>
<span id="cb27-8"><a href="light-availability.html#cb27-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_of_day =</span> <span class="st">&quot;dawn&quot;</span>)</span>
<span id="cb27-9"><a href="light-availability.html#cb27-9" tabindex="-1"></a></span>
<span id="cb27-10"><a href="light-availability.html#cb27-10" tabindex="-1"></a>dusk <span class="ot">&lt;-</span> acoustic_data <span class="sc">%&gt;%</span></span>
<span id="cb27-11"><a href="light-availability.html#cb27-11" tabindex="-1"></a>  <span class="fu">group_by</span>(eBird_codes) <span class="sc">%&gt;%</span></span>
<span id="cb27-12"><a href="light-availability.html#cb27-12" tabindex="-1"></a>  <span class="fu">filter</span>(time_of_day <span class="sc">==</span> <span class="st">&quot;dusk&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="light-availability.html#cb27-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(time_to_dusk, time_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb27-14"><a href="light-availability.html#cb27-14" tabindex="-1"></a>  <span class="fu">rename</span>(., <span class="at">time_from_startTime =</span> time_to_dusk) <span class="sc">%&gt;%</span></span>
<span id="cb27-15"><a href="light-availability.html#cb27-15" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">median_startTime =</span> <span class="fu">median</span>(time_from_startTime)) <span class="sc">%&gt;%</span></span>
<span id="cb27-16"><a href="light-availability.html#cb27-16" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_of_day =</span> <span class="st">&quot;dusk&quot;</span>)</span>
<span id="cb27-17"><a href="light-availability.html#cb27-17" tabindex="-1"></a></span>
<span id="cb27-18"><a href="light-availability.html#cb27-18" tabindex="-1"></a>light <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dawn, dusk) <span class="co"># this dataframe gives us the median time from dawn and time to dusk for each species</span></span>
<span id="cb27-19"><a href="light-availability.html#cb27-19" tabindex="-1"></a></span>
<span id="cb27-20"><a href="light-availability.html#cb27-20" tabindex="-1"></a>vocal_act <span class="ot">&lt;-</span> vocal_act <span class="sc">%&gt;%</span></span>
<span id="cb27-21"><a href="light-availability.html#cb27-21" tabindex="-1"></a>  <span class="fu">left_join</span>(light, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;eBird_codes&quot;</span>, <span class="st">&quot;time_of_day&quot;</span>)) <span class="co"># adding median time from dawn and time to dusk to vocal activity data</span></span>
<span id="cb27-22"><a href="light-availability.html#cb27-22" tabindex="-1"></a></span>
<span id="cb27-23"><a href="light-availability.html#cb27-23" tabindex="-1"></a><span class="do">## visualization</span></span>
<span id="cb27-24"><a href="light-availability.html#cb27-24" tabindex="-1"></a><span class="do">## creating two plots - one for dawn and one for dusk and using patchwork to combine them</span></span>
<span id="cb27-25"><a href="light-availability.html#cb27-25" tabindex="-1"></a>fig_light_dawn <span class="ot">&lt;-</span> vocal_act <span class="sc">%&gt;%</span></span>
<span id="cb27-26"><a href="light-availability.html#cb27-26" tabindex="-1"></a>  <span class="fu">filter</span>(time_of_day <span class="sc">==</span> <span class="st">&quot;dawn&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-27"><a href="light-availability.html#cb27-27" tabindex="-1"></a>  <span class="fu">ggscatterstats</span>(</span>
<span id="cb27-28"><a href="light-availability.html#cb27-28" tabindex="-1"></a>    <span class="at">data =</span> .,</span>
<span id="cb27-29"><a href="light-availability.html#cb27-29" tabindex="-1"></a>    <span class="at">x =</span> median_startTime,</span>
<span id="cb27-30"><a href="light-availability.html#cb27-30" tabindex="-1"></a>    <span class="at">y =</span> percent_normalized_detections,</span>
<span id="cb27-31"><a href="light-availability.html#cb27-31" tabindex="-1"></a>    <span class="at">xlab =</span> <span class="st">&quot;Median Time to Darkness (in hours)</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb27-32"><a href="light-availability.html#cb27-32" tabindex="-1"></a>    <span class="at">ylab =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st"> % Vocal activity at Dawn&quot;</span>,</span>
<span id="cb27-33"><a href="light-availability.html#cb27-33" tabindex="-1"></a>    <span class="at">pairwise.display =</span> <span class="st">&quot;significant&quot;</span>,</span>
<span id="cb27-34"><a href="light-availability.html#cb27-34" tabindex="-1"></a>    <span class="at">package =</span> <span class="st">&quot;ggsci&quot;</span>,</span>
<span id="cb27-35"><a href="light-availability.html#cb27-35" tabindex="-1"></a>    <span class="at">palette =</span> <span class="st">&quot;default_jco&quot;</span>,</span>
<span id="cb27-36"><a href="light-availability.html#cb27-36" tabindex="-1"></a>    <span class="at">violin.args =</span> <span class="fu">list</span>(<span class="at">width =</span> <span class="dv">0</span>),</span>
<span id="cb27-37"><a href="light-availability.html#cb27-37" tabindex="-1"></a>    <span class="at">ggplot.component =</span> <span class="fu">list</span>(<span class="fu">theme</span>(</span>
<span id="cb27-38"><a href="light-availability.html#cb27-38" tabindex="-1"></a>      <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>, <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb27-39"><a href="light-availability.html#cb27-39" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb27-40"><a href="light-availability.html#cb27-40" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span></span>
<span id="cb27-41"><a href="light-availability.html#cb27-41" tabindex="-1"></a>      ),</span>
<span id="cb27-42"><a href="light-availability.html#cb27-42" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb27-43"><a href="light-availability.html#cb27-43" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb27-44"><a href="light-availability.html#cb27-44" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#1b2838&quot;</span></span>
<span id="cb27-45"><a href="light-availability.html#cb27-45" tabindex="-1"></a>      ),</span>
<span id="cb27-46"><a href="light-availability.html#cb27-46" tabindex="-1"></a>      <span class="at">axis.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb27-47"><a href="light-availability.html#cb27-47" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb27-48"><a href="light-availability.html#cb27-48" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span></span>
<span id="cb27-49"><a href="light-availability.html#cb27-49" tabindex="-1"></a>      )</span>
<span id="cb27-50"><a href="light-availability.html#cb27-50" tabindex="-1"></a>    ))</span>
<span id="cb27-51"><a href="light-availability.html#cb27-51" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-52"><a href="light-availability.html#cb27-52" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> common_name),</span>
<span id="cb27-53"><a href="light-availability.html#cb27-53" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb27-54"><a href="light-availability.html#cb27-54" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">&quot;italic&quot;</span></span>
<span id="cb27-55"><a href="light-availability.html#cb27-55" tabindex="-1"></a>  )</span>
<span id="cb27-56"><a href="light-availability.html#cb27-56" tabindex="-1"></a></span>
<span id="cb27-57"><a href="light-availability.html#cb27-57" tabindex="-1"></a>fig_light_dusk <span class="ot">&lt;-</span> vocal_act <span class="sc">%&gt;%</span></span>
<span id="cb27-58"><a href="light-availability.html#cb27-58" tabindex="-1"></a>  <span class="fu">filter</span>(time_of_day <span class="sc">==</span> <span class="st">&quot;dusk&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-59"><a href="light-availability.html#cb27-59" tabindex="-1"></a>  <span class="fu">ggscatterstats</span>(</span>
<span id="cb27-60"><a href="light-availability.html#cb27-60" tabindex="-1"></a>    <span class="at">data =</span> .,</span>
<span id="cb27-61"><a href="light-availability.html#cb27-61" tabindex="-1"></a>    <span class="at">x =</span> median_startTime,</span>
<span id="cb27-62"><a href="light-availability.html#cb27-62" tabindex="-1"></a>    <span class="at">y =</span> percent_normalized_detections,</span>
<span id="cb27-63"><a href="light-availability.html#cb27-63" tabindex="-1"></a>    <span class="at">xlab =</span> <span class="st">&quot;Median Time to Darkness(in hours))</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb27-64"><a href="light-availability.html#cb27-64" tabindex="-1"></a>    <span class="at">ylab =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st"> % Vocal activity at Dusk&quot;</span>,</span>
<span id="cb27-65"><a href="light-availability.html#cb27-65" tabindex="-1"></a>    <span class="at">pairwise.display =</span> <span class="st">&quot;significant&quot;</span>,</span>
<span id="cb27-66"><a href="light-availability.html#cb27-66" tabindex="-1"></a>    <span class="at">package =</span> <span class="st">&quot;ggsci&quot;</span>,</span>
<span id="cb27-67"><a href="light-availability.html#cb27-67" tabindex="-1"></a>    <span class="at">palette =</span> <span class="st">&quot;default_jco&quot;</span>,</span>
<span id="cb27-68"><a href="light-availability.html#cb27-68" tabindex="-1"></a>    <span class="at">violin.args =</span> <span class="fu">list</span>(<span class="at">width =</span> <span class="dv">0</span>),</span>
<span id="cb27-69"><a href="light-availability.html#cb27-69" tabindex="-1"></a>    <span class="at">ggplot.component =</span> <span class="fu">list</span>(<span class="fu">theme</span>(</span>
<span id="cb27-70"><a href="light-availability.html#cb27-70" tabindex="-1"></a>      <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>, <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb27-71"><a href="light-availability.html#cb27-71" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb27-72"><a href="light-availability.html#cb27-72" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">18</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span></span>
<span id="cb27-73"><a href="light-availability.html#cb27-73" tabindex="-1"></a>      ),</span>
<span id="cb27-74"><a href="light-availability.html#cb27-74" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb27-75"><a href="light-availability.html#cb27-75" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb27-76"><a href="light-availability.html#cb27-76" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">color =</span> <span class="st">&quot;#1b2838&quot;</span></span>
<span id="cb27-77"><a href="light-availability.html#cb27-77" tabindex="-1"></a>      ),</span>
<span id="cb27-78"><a href="light-availability.html#cb27-78" tabindex="-1"></a>      <span class="at">axis.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb27-79"><a href="light-availability.html#cb27-79" tabindex="-1"></a>        <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb27-80"><a href="light-availability.html#cb27-80" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">15</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span></span>
<span id="cb27-81"><a href="light-availability.html#cb27-81" tabindex="-1"></a>      )</span>
<span id="cb27-82"><a href="light-availability.html#cb27-82" tabindex="-1"></a>    ))</span>
<span id="cb27-83"><a href="light-availability.html#cb27-83" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-84"><a href="light-availability.html#cb27-84" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> common_name),</span>
<span id="cb27-85"><a href="light-availability.html#cb27-85" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb27-86"><a href="light-availability.html#cb27-86" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">&quot;italic&quot;</span></span>
<span id="cb27-87"><a href="light-availability.html#cb27-87" tabindex="-1"></a>  )</span>
<span id="cb27-88"><a href="light-availability.html#cb27-88" tabindex="-1"></a></span>
<span id="cb27-89"><a href="light-availability.html#cb27-89" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb27-90"><a href="light-availability.html#cb27-90" tabindex="-1"></a>fig_light_vocAct <span class="ot">&lt;-</span> <span class="fu">wrap_plots</span>(fig_light_dawn, fig_light_dusk,</span>
<span id="cb27-91"><a href="light-availability.html#cb27-91" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">2</span></span>
<span id="cb27-92"><a href="light-availability.html#cb27-92" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb27-93"><a href="light-availability.html#cb27-93" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb27-94"><a href="light-availability.html#cb27-94" tabindex="-1"></a>    <span class="at">tag_levels =</span> <span class="st">&quot;a&quot;</span>,</span>
<span id="cb27-95"><a href="light-availability.html#cb27-95" tabindex="-1"></a>    <span class="at">tag_prefix =</span> <span class="st">&quot;(&quot;</span>,</span>
<span id="cb27-96"><a href="light-availability.html#cb27-96" tabindex="-1"></a>    <span class="at">tag_suffix =</span> <span class="st">&quot;)&quot;</span></span>
<span id="cb27-97"><a href="light-availability.html#cb27-97" tabindex="-1"></a>  )</span>
<span id="cb27-98"><a href="light-availability.html#cb27-98" tabindex="-1"></a></span>
<span id="cb27-99"><a href="light-availability.html#cb27-99" tabindex="-1"></a><span class="fu">ggsave</span>(fig_light_vocAct, <span class="at">filename =</span> <span class="st">&quot;figs/fig_detections_vs_medianTimeTo Darkness.png&quot;</span>, <span class="at">width =</span> <span class="dv">14</span>, <span class="at">height =</span> <span class="dv">18</span>, <span class="at">device =</span> <span class="fu">png</span>(), <span class="at">units =</span> <span class="st">&quot;in&quot;</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb27-100"><a href="light-availability.html#cb27-100" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<div class="float">
<img src="figs/fig_detections_vs_medianTimeTo%20Darkness.png" alt="(a) Positive correlation between vocal activity at dawn and median time to darkness and (b) Negative correlation between vocal activity at dusk and median time to darkness" />
<div class="figcaption">(a) Positive correlation between vocal activity at dawn and median time to darkness and (b) Negative correlation between vocal activity at dusk and median time to darkness</div>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="frequency.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="foraging-guild.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vjjan91/diurnal-Acoustics/edit/master/04_light-availability.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
